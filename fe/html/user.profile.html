<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Never Alone ‚Äì Profil</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/styles.css" />
</head>
<body>
<div class="container">
    <div class="topbar">
        <div class="brand">
            <div class="logo" aria-hidden="true"></div>
            <div>
                <h1>Profil <span id="cheatTrigger" style="cursor:pointer; opacity:0.1; font-size: 16px; vertical-align: super;" title="Dev Tools">#</span></h1>
                <p>Deine Account-Daten</p>
            </div>
        </div>

        <div class="row">
            <a class="btn" href="/home.html">Zur√ºck</a>
            <button class="btn logout" id="logoutBtn" type="button">Logout</button>
        </div>
    </div>

    <div class="card" style="max-width: 600px; margin: 0 auto;">

        <h2>√úbersicht</h2>
        <div class="toast" id="profileMsg" style="display:none; margin-bottom: 20px;"></div>

        <div class="profileHeader">
            <div class="avatarBox">
                <img id="avatarImg" alt="Avatar" style="display:none;">
                <div id="avatarFallback" class="avatarInitial" aria-hidden="true">?</div>
            </div>

            <div class="profileMeta">
                <div class="nameLine" id="pName">‚Ä¶</div>
                <div class="mailLine" id="pEmail">‚Ä¶</div>
                <div style="font-size: 12px; color: var(--muted); margin-top: 4px;">
                    Mitglied seit: <span id="pCreatedAt">‚Ä¶</span>
                </div>
            </div>
        </div>

        <hr style="border: 0; border-top: 1px solid var(--border); margin: 24px 0;">

        <h3>Einstellungen</h3>

        <form class="form" id="nameForm" style="margin-bottom: 24px;">
            <label>Anzeigename √§ndern
                <div style="display: flex; gap: 10px;">
                    <input id="newName" type="text" autocomplete="name" placeholder="Neuer Name"
                           minlength="2" maxlength="30" required style="flex:1;" />
                    <button class="btn primary" type="submit">Speichern</button>
                </div>
            </label>
        </form>

        <form class="form" id="avatarForm">
            <label>Neues Profilbild hochladen (max 2MB)
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <input id="avatarFile" type="file" accept="image/png,image/jpeg,image/webp" required style="flex:1;" />
                    <button class="btn" type="submit">Hochladen</button>
                </div>
            </label>
        </form>

        <div class="emoji-section" style="margin-top: 30px;">
            <h3>Emoji Kitchen üßë‚Äçüç≥</h3>
            <p class="muted" style="margin-top:4px; font-size:13px;">
                Mixe zwei Emojis zu einem neuen Avatar!
            </p>

            <div class="mashup-controls">
                <div id="slot1" class="mashup-slot selected" title="Emoji 1 w√§hlen">?</div>
                <div style="font-size:18px; color:var(--muted);">+</div>
                <div id="slot2" class="mashup-slot" title="Emoji 2 w√§hlen">?</div>

                <div style="font-size:18px; color:var(--muted); margin:0 4px;">=</div>

                <div class="mashup-result">
                    <img id="mashupPreview" style="display:none;" alt="Mashup" />
                    <span id="mashupPlaceholder" class="muted" style="font-size:24px;">?</span>
                </div>
            </div>

            <div id="emojiGrid" class="emoji-grid"></div>

            <div class="row" style="margin-top:12px; justify-content:center;">
                <button id="saveMashupBtn" class="btn primary" type="button" disabled>
                    Als Avatar speichern
                </button>
            </div>
        </div>

    </div>
</div>

<script type="module" src="/js/profile.page.js"></script>
</body>
</html>